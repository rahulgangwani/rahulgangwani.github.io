<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <!-- Scaling for mobile devices -->
    <!--    <title>MeetMe - Resume Website Template</title>-->
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" type="text/css" href="assets/css/bootstrap.min.css">
    <!-- Fonts -->
    <link rel="stylesheet" type="text/css" href="assets/fonts/font-awesome.min.css">
    <!-- Icon -->
    <link rel="stylesheet" type="text/css" href="assets/fonts/simple-line-icons.css">
    <!-- Slicknav -->
    <link rel="stylesheet" type="text/css" href="assets/css/slicknav.css">
    <!-- Menu CSS -->
    <link rel="stylesheet" type="text/css" href="assets/css/menu_sideslide.css">
    <!-- Slider CSS -->
    <link rel="stylesheet" type="text/css" href="assets/css/slide-style.css">
    <!-- Nivo Lightbox -->
    <link rel="stylesheet" type="text/css" href="assets/css/nivo-lightbox.css">
    <!-- Animate -->
    <link rel="stylesheet" type="text/css" href="assets/css/animate.css">
    <!-- Main Style -->
    <link rel="stylesheet" type="text/css" href="assets/css/main.css">
    <!-- Responsive Style -->
    <link rel="stylesheet" type="text/css" href="assets/css/responsive.css">
    <link rel="stylesheet" href="../meet-me-opl/assets/css/main.css">

</head>
<body>
    <!--- Header for each project --->
    <div id="project-area" class="project-area-bg">
        <div class="overlay"></div>
        <div class="container">
            <div class="row">
                <div class="col-md-12 col-sm-12 text-center">
                    <div class="contents">
                        <h5 class="script-font wow fadeInUp" data-wow-delay="0.4s">Smart Pipes for Automated Water Drain</h5>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!--- Project image: Might do a slideshow? --->
    <div class="container">
        <div class="row">
            <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
                <ol class="carousel-indicators">
                    <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
                    <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
                    <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
                    <li data-target="#carouselExampleIndicators" data-slide-to="3"></li>
                </ol>
                <div class="carousel-inner">
                    <div class="carousel-item active">
                        <img class="d-block w-100" src="assets/img/gallery/smart-pipes-photos/SmartPipes_Concept_1140x400.png" alt="Second slide">
                        <div class="carousel-caption d-none d-md-block">
                            <h5>Overview</h5>
                            <p>Main PCB communicates with Node PCB to drain water from pipes if temperature is too low to prevent water freezing and pipes bursting.</p>
                        </div>
                    </div>
                    <div class="carousel-item">
                        <img class="d-block w-100" src="assets/img/gallery/smart-pipes-photos/SmartPipes_PCB_1140x400.png" alt="Second slide">
                        <div class="carousel-caption d-none d-md-block">
                            <h5>PCB Design</h5>
                            <p>12V adapter wall adapter used as power, but also can be through LiPo battery. Xbee is used to communicate between PCBs.</p>
                        </div>
                    </div>
                    <div class="carousel-item">
                        <img class="d-block w-100" src="assets/img/gallery/smart-pipes-photos/SmartPipes_webpage_1140x400.PNG" alt="Third slide">
                        <div class="carousel-caption d-none d-md-block">
                            <h5>Webpage</h5>
                            <p>ESP8266 hosts and pushes notifications to a webserver. This has manual controls to drain pipes.</p>
                        </div>
                    </div>
                    <div class="carousel-item">
                        <img class="d-block w-100" src="assets/img/gallery/smart-pipes-photos/SmartPipes_FinalPackage_1140x400.png" alt="Third slide">
                        <div class="carousel-caption d-none d-md-block">
                            <h5>Final Package</h5>
                            <p>PCBs are enclosed in 3D Printed case to protect from water damage.</p>
                        </div>
                    </div>
                </div>
                <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="sr-only">Previous</span>
                </a>
                <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="sr-only">Next</span>
                </a>
            </div>
        </div>
    </div>
    <div id="content-area" class="description-area">
        <div class="container">
            <div class="row">
                <div class="col-md-12 col-sm-12">
                    <h1>Overview</h1>
                    <p>
                        <b>The following project was done as part of the senior design course, EECS 473, offered at the University of Michigan, Ann Arbor.</b>
                    </p>
                    <br />
                    <p>
                        As outdoor temperatures plummet, <b>household pipes can be exposed to extremely cold conditions</b>. These lower temperatures can cause the water in pipes to freeze.
                        This results in an <b>increase in pressure in the pipes, which can cause them to burst</b>.
                    </p>
                    <p>
                        In the event that a homeowner travels during the cold holidays, they are expected to keep the water running to prevent this from happening. However, this solution
                        leads to a waste of water and increased utility costs.
                    </p>
                    <p>
                        This solution is an alternative, <b>cost-saving approach to save pipes from bursing in extreme cold temperatures</b>. The embedded system was made so that it can easily
                        be integrated into different kinds of homes without runing the structural integrity of the pipes.
                    </p>
                    <img src="assets/img/gallery/smart-pipes-photos/SmartPipes_Concept_1140x400.png" style="max-width:100%" />

                    <br />

                    <h1>Hardware</h1>
                    <p>
                        There were two types of PCBs created for this project: <b>Main PCB</b> and a <b>Node PCB</b>
                    </p>
                    <img src="assets/img/gallery/smart-pipes-photos/SmartPipes_MainNodePCB_1140x400.png" style="max-width:100%" />
                    <p>
                        The <b>Main PCB</b> (central device) is placed near the the point where water enters the house's pipes (usually at the basement). This PCB contains logic to
                        <b>control the main water supply</b> as well as <b>turns on the air compressor to help push air and drain the pipes</b>. The Main PCB also has an <b>
                            ESP8266 WiFi
                            module
                        </b>, which is used to send updates to a web server on the temperature of the pipes and if the water has been drained. The <b>
                            server can also send information
                            back to the ESP module
                        </b> in case the user chooses to drain the water in the pipes manually instead.
                    </p>
                    <p>
                        The <b>Node PCBs</b> (peripheral device) are ideally placed at every floor of the house, and contains logic to control solenoid valves which help to drain water.
                        The Node PCBs get instructions from the Main PCB to open or close their respective valves using <b>Xbee communication protcols.</b>
                    </p>
                    <p>
                        Both PCBs interface with a temperature sensor, which is placed externally on the pipes. Each Node PCB records temperature and reports it back to the Main PCB.
                        At any point a temperature sensor value is recorded below the threshold where pipes are at risk (between -4&#8451 and -6&#8451), the Main PCB sends instructions
                        to open valves so the water can be drained. <b>Both PCBs also include power support for both wall adapter as well as LiPo battery</b>. We made this design decision because
                        <b>there is a strong correlation between hazardous temperatures and power outages</b>. If the PCBs were just powered with the adapter, the system would shut off in the
                        event of a power outage. With our design, <b>the LiPo battery is charged when powered through the adapter, and takes over running the system if the power were to go out</b>.
                    </p>
                    <img src="assets/img/gallery/smart-pipes-photos/SmartPipes_PCB_1140x400.png" style="max-width:100%" />
                    <p>
                        A single PCB was designed, with each Node PCB using a subset of the all the peripherals on the board. The <b>STM32L476VGT6 microcontroller</b> was chosen to interface
                        with all the peripherals. We chose this processor due to its low-power support and <b>ARM Cortex M4 processor</b>, which supports floating point math for our temperature
                        sensor calculations. Since this design supported both power adapter and LiPo for power, we had to ensure proper trace width and regulators to handle 3 different
                        power supplies: <b>12V, 5V, and 3.3V</b>. To save on power consumption, we chose to use a <b>switiching regulator</b> rather than linear to convert the 12V from
                        the adapter to 5V.
                    </p>
                    <img src="assets/img/gallery/smart-pipes-photos/SmartPipes_PCB_Finish_1140x400.png" style="max-width:100%" />

                    <br /><br />

                    <h1>Software</h1>
                    <p>
                        The following diagram is an overview of our system and all the peripherals attached:
                    </p>
                    <img src="assets/img/gallery/smart-pipes-photos/SmartPipes_BlockDiagram_1140x400.png" style="max-width:100%" />
                    <p>
                        Each peripheral functioned as follows:
                    </p>
                    <ul class="descSubList">
                        <li class="description-list"><b>XBee: </b>Sends information to Node PCB on which valves need to open in case water needs to be drained. Nodes also use Xbee to confirm valve status back to Main</li>
                        <li class="description-list"><b>ESP8266: </b>Updates web server with temperature data and receives instructions on if manual drain is needed from server</li>
                        <li class="description-list"><b>Temperature Sensor: </b>Uses OneWire (device specific interface) to send data, which can be converted to a temperature value</li>
                        <li class="description-list"><b>Valves: </b>Controlled through GPIO. Motorized valves also use an <b>H-Bridge driver</b> for bi-directional control</li>
                        <li class="description-list">
                            <b>Air compressor: </b>We bought a special adapter which can control power output based on a switch. That switch was toggled through GPIO.
                            When the microcontroller sent an active high signal to the adapter, the air compressor turned on and released air
                        </li>
                        <li class="description-list"><b>OLED Display: </b>Displayed the current temperature read from the sensor and connection status</li>
                    </ul>
                    <p>
                        The system functioned in a <b>FreeRTOS</b> environment using the <b>Rate Monotonic (RM)</b>scheduling algorithm. Every <b>10 seconds (highest priority)</b>,
                        the PCBs collected temperature data. Every <b>20 seconds (middle priority)</b>, the Main PCB initiated communications with each Node PCB.
                        <b>Every minute (lowest priority)</b>, the OLED display was updated with the latest temperature and connection status.
                    </p>
                    <p>
                        If the temperature result is less than the threshold or the ESP receives a manual drain command, the system is interrupted and goes into a special <b>drain task</b>
                        which preempts all other tasks and executes until completion (in a process known as <b>priority inheritance</b>).
                    </p>
                    <img src="assets/img/gallery/smart-pipes-photos/SmartPipes_DrainProcess_1140x400.png" style="max-width:100%" />
                    <p>
                        The server hosted by the ESP8266 was written in <b>C#</b> and performed the following:
                    </p>
                    <ul class="descSubList">
                        <li class="description-list">Displays temperature of the lowest part of the pipe system</li>
                        <li class="description-list">Displays the current status of the pipes: Either normal or drained</li>
                        <li class="description-list">Push botton to manually drain the pipes, which will cause the embedded system to execute the drain task</li>
                        <li class="description-list">Push button to refill the pipes with water (due to time constraints, we were not able to implement this feature)</li>
                        <li class="description-list">Control the time allowed to stay in the drain task. Given the current system, there was no way to determine if all the water
                                                     was drained from the pipes before closing the valves. Therefore, we added this feature to ensure all water was drained</li>
                    </ul>
                    <img src="assets/img/gallery/smart-pipes-photos/SmartPipes_webpage_1140x400.png" style="max-width:100%" />
                    
                    <br /><br />

                    <h1>Final Packaging</h1>
                    <p>
                        The PCB, with all the components, was packaged into a 3D printed box to protect it from water damage
                    </p>
                    <img src="assets/img/gallery/smart-pipes-photos/SmartPipes_FinalPackage_1140x400.png" style="max-width:100%" />
                    <p>
                        As part of the requirements for the class project, we demoed our project at the <b>Michigan Engineering Design Expo</b>. For the sake of the expo, we created
                        a <b>small-scale prototype</b> of our system with a Main PCB and a single Node PCB. 
                    </p>
                    <img src="assets/img/gallery/smart-pipes-photos/SmartPipes_Demo_1140x480.png" style="max-width:100%" />
                    <p>
                        The system worked as intended, however it's important to note that future work would be done to further encase the wiring so that the connections are stable and
                        well protected from the surrounding environment.
                    </p>
                    <br /><br />

                    <h1>Acknowledgements</h1>
                    <p>
                        This work was done with the help of my fellow teammates: <b>Devesha Tewari, Chunan Ye, Yutian Chen, and Carl Wu</b>
                    </p>
                    <br /><br /><br />
                </div>
            </div>
        </div>
    </div>
    <!-- Footer Section Start -->
    <footer class="footer-area project-footer-padding fixed-bottom"style="background: #1c1c20d1">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="footer-text text-center wow fadeInDown" data-wow-delay="0.3s">
                        <ul class="social-icon">
                            <li>
                                <a class="paper" href="assets/img/gallery/smart-pipes-photos/EECS473F18-Smart_Water_Pipes.pdf"><i class="icon-doc"></i></a>
                            </li>
                            <li>
                                <a class="home" href="javascript:history.back()"><i class="icon-home"></i></a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <a href="#" class="back-to-top">
            <i class="icon-arrow-up"></i>
        </a>
    </footer>
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="assets/js/jquery-min.js"></script>
    <script src="assets/js/popper.min.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>
    <script src="assets/js/jquery.mixitup.js"></script>
    <script src="assets/js/jquery.counterup.min.js"></script>
    <script src="assets/js/waypoints.min.js"></script>
    <script src="assets/js/wow.js"></script>
    <script src="assets/js/jquery.nav.js"></script>
    <script src="assets/js/jquery.easing.min.js"></script>
    <script src="assets/js/nivo-lightbox.js"></script>
    <script src="assets/js/jquery.slicknav.js"></script>
    <script src="assets/js/main.js"></script>
    <script src="assets/js/form-validator.min.js"></script>
    <script src="assets/js/contact-form-script.min.js"></script>
    <script src="assets/js/map.js"></script>

</body>
</html> 